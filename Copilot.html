<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dungeon Game</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<style>
body {
background-color: black;
}
.wall {
width: 100%;
height: 100%;
object-fit: cover;
}
.floor {
width: 100%;
height: 100%;
object-fit: cover;
}
.stair {
position: absolute;
width: 100%;
height: 100%;
object-fit: cover;
z-index: 10;
}
.counter {
position: absolute;
top: 10px;
right: 10px;
color: white;
font-size: 24px;
font-weight: bold;
z-index: 10;
}
.player-sprite {
position: absolute;
width: 100%;
height: 100%;
transition: background-image 0.5s ease-in-out;
}
.menu {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
background-color: rgba(0, 0, 0, 0.8);
border: 2px solid white;
border-radius: 8px;
padding: 20px;
z-index: 20;
}
.menu button {
margin: 5px;
}
.options-menu {
display: flex;
flex-direction: column;
}
.options-menu label {
color: white;
}
.moves-menu {
display: flex;
flex-direction: column;
}
.moves-menu p {
color: white;
}
.red-border {
border: 2px solid transparent;
border-image: linear-gradient(to right, red, transparent) 1;
}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
//import { frames } from 'frameExports.js'
//console.log (frames.characters.vaporeon.idle.down.frame1);
const Reviverseed = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Item%20Sprites/Seed_Yellow.png';
const ITEM_DEFS = {
  "Reviver Seed": {
    name: "Reviver Seed",
    sprite: Reviverseed,
    stackSize: 1
  },
  "Stun Seed": {
    name: "Stun Seed",
    sprite: Reviverseed,
    stackSize: 1
  },
  "Tiny Reviver Seed": {
    name: "Tiny Reviver Seed",
    sprite: Reviverseed,
    stackSize: 1
  },
  "Sleep Seed": {
    name: "Sleep Seed",
    sprite: Reviverseed,
    stackSize: 1
  }
  ,"Warp Seed": {
    name: "Warp Seed",
    sprite: Reviverseed,
    stackSize: 1
  },
  "Life Seed": {
    name: "Life Seed",
    sprite: Reviverseed,
    stackSize: 1
  }
};
const MAX_INVENTORY_SLOTS = 10;

const vaporeonSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimD1.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimD2.png'
];

const vaporeonLeftSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimL1.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimL2.png'
];

const vaporeonRightSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimR1.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimR2.png'
];

const vaporeonUpSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimU1.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimU2.png'
];

const vaporeonDownLeftSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimBL1.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimBL2.png'
];

const vaporeonDownRightSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimBR1.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimBR2.png'
];

const vaporeonUpLeftSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimTL1.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimTL2.png'
];

const vaporeonUpRightSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimTR1.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/idle/IdleanimTR2.png'
];

const vaporeonDownWalkSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimD1Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimD2Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimD3Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimD4Padded.png'
]

const vaporeonUpWalkSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimU1Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimU2Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimU3Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimU4Padded.png'
]

const vaporeonLeftWalkSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimL1Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimL2Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimL3Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimL4Padded.png'
]

const vaporeonRightWalkSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimR1Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimR2Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimR3Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimR4Padded.png'
]

const vaporeonUpLeftWalkSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimTL1Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimTL2Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimTL3Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimTL4Padded.png'
]

const vaporeonUpRightWalkSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimTR1Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimTR2Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimTR3Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimTR4Padded.png'
]

const vaporeonDownLeftWalkSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimBL1Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimBL2Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimBL3Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimBL4Padded.png'
]

const vaporeonDownRightWalkSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimBR1Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimBR2Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimBR3Padded.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/animations/frames/walk/WalkanimBR4Padded.png'
]
const vaporeonPortraitNormal = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Pokemon%20Sprites/Vaporeon/portraits/VaporeonPortrait_Normal.png';

const Pokedollar = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Item%20Sprites/Pokedollar.png'; // Replace with your sprite URL

const wallSpriteLeft = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedwallSpritesheet164l.png';
const wallSpriteRight = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedwallSpritesheet167r.png';
const wallSpriteUp = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedwallSpritesheet001u.png';
const wallSpriteDown = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedwallSpritesheet186d.png';
const cornerSpriteTopLeft = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedwallSpritesheet000tl.png'; // Updated to new top left corner sprite
const cornerSpriteTopRight = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedwallSpritesheet003tr.png'; // Updated to new top right corner sprite
const cornerSpriteBottomLeft = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedwallSpritesheet124bl.png'; // Updated to new bottom left corner sprite
const cornerSpriteBottomRight = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedwallSpritesheet159br.png';
const enclosedWallSprite1 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/Brick%20Wall%20Full1.png';
const enclosedWallSprite2 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/Brick%20Wall%20Full2.png';
const enclosedWallSprite3 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/Brick%20Wall%20Full3.png';
const enclosedWallSprite4 ='https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/Brick%20Wall%20Full4.png';
//These are debug images to test the exp bar
const expBarComponent100 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar100%25.png';
const expBarComponent0 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar0%25.png';
const expBarComponent1 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar1%25.png';
const expBarComponent2 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar2%25.png';
const expBarComponent3 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar3%25.png';
const expBarComponent4 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar4%25.png';
const expBarComponent5 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar5%25.png';
const expBarComponent6 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar6%25.png';
const expBarComponent7 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar7%25.png';
const expBarComponent8 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar8%25.png';
const expBarComponent9 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar9%25.png';
const expBarComponent10 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar10%25.png';
const expBarComponent11 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar11%25.png';
const expBarComponent12 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar12%25.png';
const expBarComponent13 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar13%25.png';
const expBarComponent14 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar14%25.png';
const expBarComponent15 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar15%25.png';
const expBarComponent16 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar16%25.png';
const expBarComponent17 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar17%25.png';
const expBarComponent18 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar18%25.png';
const expBarComponent19 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar19%25.png';
const expBarComponent20 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar20%25.png';
const expBarComponent21 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar21%25.png';
const expBarComponent22 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar22%25.png';
const expBarComponent23 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar23%25.png';
const expBarComponent24 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar24%25.png';
const expBarComponent25 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar25%25.png';
const expBarComponent26 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar26%25.png';
const expBarComponent27 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar27%25.png';
const expBarComponent28 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar28%25.png';
const expBarComponent29 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar29%25.png';
const expBarComponent30 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar30%25.png';
const expBarComponent31 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar31%25.png';
const expBarComponent32 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar32%25.png';
const expBarComponent33 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar33%25.png';
const expBarComponent34 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar34%25.png';
const expBarComponent35 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar35%25.png';
const expBarComponent36 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar36%25.png';
const expBarComponent37 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar37%25.png';
const expBarComponent38 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar38%25.png';
const expBarComponent39 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar39%25.png';
const expBarComponent40 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar40%25.png';
const expBarComponent41 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar41%25.png';
const expBarComponent42 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar42%25.png';
const expBarComponent43 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar43%25.png';
const expBarComponent44 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar44%25.png';
const expBarComponent45 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar45%25.png';
const expBarComponent46 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar46%25.png';
const expBarComponent47 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar47%25.png';
const expBarComponent48 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar48%25.png';
const expBarComponent49 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar49%25.png';
const expBarComponent50 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar50%25.png';
const expBarComponent51 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar51%25.png';
const expBarComponent52 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar52%25.png';
const expBarComponent53 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar53%25.png';
const expBarComponent54 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar54%25.png';
const expBarComponent55 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar55%25.png';
const expBarComponent56 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar56%25.png';
const expBarComponent57 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar57%25.png';
const expBarComponent58 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar58%25.png';
const expBarComponent59 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar59%25.png';
const expBarComponent60 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar60%25.png';
const expBarComponent61 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar61%25.png';
const expBarComponent62 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar62%25.png';
const expBarComponent63 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar63%25.png';
const expBarComponent64 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar64%25.png';
const expBarComponent65 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar65%25.png';
const expBarComponent66 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar66%25.png';
const expBarComponent67 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar67%25.png';
const expBarComponent68 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar68%25.png';
const expBarComponent69 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar69%25.png';
const expBarComponent70 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar70%25.png';
const expBarComponent71 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar71%25.png';
const expBarComponent72 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar72%25.png';
const expBarComponent73 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar73%25.png';
const expBarComponent74 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar74%25.png';
const expBarComponent75 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar75%25.png';
const expBarComponent76 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar76%25.png';
const expBarComponent77 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar77%25.png';
const expBarComponent78 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar78%25.png';
const expBarComponent79 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar79%25.png';
const expBarComponent80 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar80%25.png';
const expBarComponent81 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar81%25.png';
const expBarComponent82 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar82%25.png';
const expBarComponent83 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar83%25.png';
const expBarComponent84 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar84%25.png';
const expBarComponent85 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar85%25.png';
const expBarComponent86 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar86%25.png';
const expBarComponent87 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar87%25.png';
const expBarComponent88 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar88%25.png';
const expBarComponent89 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar89%25.png';
const expBarComponent90 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar90%25.png';
const expBarComponent91 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar91%25.png';
const expBarComponent92 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar92%25.png';
const expBarComponent93 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar93%25.png';
const expBarComponent94 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar94%25.png';
const expBarComponent95 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar95%25.png';
const expBarComponent96 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar96%25.png';
const expBarComponent97 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar97%25.png';
const expBarComponent98 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar98%25.png';
const expBarComponent99 = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/expBar99%25.png';
//These are debug images to test the exp bar
const floorSprites = [
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedfloorSpritesheet068%231.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedfloorSpritesheet070%232.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedfloorSpritesheet116%233.png',
'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/Tiles/Area1/EditedfloorSpritesheet117%234.png'
];
const stairSprite = 'https://raw.githubusercontent.com/jm9698/Misc-SmartTool-Projects/refs/heads/main/Game%20assets/General%20sprites/StairsWithTile.png';
const Game = () => {
const [dungeon, setDungeon] = React.useState([]);
const [level, setLevel] = React.useState(1);
const [playerHP, setPlayerHP] = React.useState(100);
const [maxPlayerHP, setMaxPlayerHP] = React.useState(100);
const [playerAttack, setPlayerAttack] = React.useState(10);
const [playerSpecialAttack, setPlayerSpecialAttack] = React.useState(20);
const [playerDefense, setPlayerDefense] = React.useState(5);
const [playerSpecialDefense, setPlayerSpecialDefense] = React.useState(10);
const [playerSpeed, setPlayerSpeed] = React.useState(5);
const [exp, setExp] = React.useState(0);
const [maxExp, setMaxExp] = React.useState(100);
const [currencyTiles, setCurrencyTiles] = React.useState([]);
const [currency, setCurrency] = React.useState(0);
const [itemTiles, setItemTiles] = React.useState([]);
const [inventory, setInventory] = React.useState([]);
const [inventoryFull, setInventoryFull] = React.useState(false);
const [showToolbox, setShowToolbox] = React.useState(false);
const [checkBox1, setCheckBox1] = React.useState(false);
const [checkBox2, setCheckBox2] = React.useState(false);
const [checkBox3, setCheckBox3] = React.useState(false);
const [actionLog, setActionLog] = React.useState([]); // [{msg, id}]
const [isAiming, setIsAiming] = React.useState(false); // Track whether player is aiming
const [inDiagonalMode, setInDiagonalMode] = React.useState(false); // Track whether player is using diagonal mode
const [showIndicators, setShowIndicators] = React.useState(false); // State to track indicator visibility
const [isWalking, setIsWalking] = React.useState(false);
const [playerPos, setPlayerPos] = React.useState({ x: 15, y: 15 });
const height = 30
const width = 30
const [stairs, setStairs] = React.useState({ x: 0, y: 0 });
const [floor, setFloor] = React.useState(1);
const [zoomLevel, setZoomLevel] = React.useState(1);
const [cameraTransform, setCameraTransform] = React.useState('');
const [idleSpriteIndex, setIdleSpriteIndex] = React.useState(0); // Index for idle animation
const [walkSpriteIndex, setWalkSpriteIndex] = React.useState(0); // Index for walk animation
const [lastDirection, setLastDirection] = React.useState('down'); // Default direction
const [isPaused, setIsPaused] = React.useState(false); // New paused state
const [showOptions, setShowOptions] = React.useState(false); // State for options menu
const [showStatus, setShowStatus] = React.useState(false); // State for status menu
const [showMoves, setShowMoves] = React.useState(false); // State for moves menu
const [keyState, setKeyState] = React.useState({
  w: false, a: false, s: false, d: false, q: false, e: false, z: false, c: false,
  wHeld: false, aHeld: false, sHeld: false, dHeld: false,
  shift: false, qHeld: false, eHeld: false, zHeld: false, cHeld: false
});
const lastDirectionRef = React.useRef(lastDirection);
const isPausedRef = React.useRef(isPaused);
const isWalkingRef = React.useRef(isWalking);
function getWallTileType(x, y, dungeon) {
    // Get neighbors (W = wall)
    let up = y > 0 && dungeon[y-1][x] === 'W';
    let down = y < dungeon.length-1 && dungeon[y+1][x] === 'W';
    let left = x > 0 && dungeon[y][x-1] === 'W';
    let right = x < dungeon[0].length-1 && dungeon[y][x+1] === 'W';

    // Corners (optional, for fancy tilesets)
    let upLeft = y > 0 && x > 0 && dungeon[y-1][x-1] === 'W';
    let upRight = y > 0 && x < dungeon[0].length-1 && dungeon[y-1][x+1] === 'W';
    let downLeft = y < dungeon.length-1 && x > 0 && dungeon[y+1][x-1] === 'W';
    let downRight = y < dungeon.length-1 && x < dungeon[0].length-1 && dungeon[y+1][x+1] === 'W';
if (!up && !left && right && down) return 'wall_corner_topleft';
    if (!up && !right && left && down) return 'wall_corner_topright';
    if (!down && !left && right && up) return 'wall_corner_bottomleft';
    if (!down && !right && left && up) return 'wall_corner_bottomright';
    if (up && down && !left && !right) return 'wall_vertical';
    if (!up && !down && left && right) return 'wall_horizontal';
    if (up && !down && left && right) return 'wall_horizontal_topcap';
    if (!up && down && left && right) return 'wall_horizontal_bottomcap';
    if (up && down && !left && right) return 'wall_left_vertical'
    if (up && down && !right && left) return 'wall_right_vertical'
    if (!up && down && !right && !left) return 'wall_isolated_down'
    if (up && !down && !right && !left) return 'wall_isolated_up'
    if (!up && !down && right && !left) return 'wall_isolated_right'
    if (!up && !down && !right && left) return 'wall_isolated_left'
    
    // ...continue for other combinations...
   else return 'wall_full'; // fallback
}
const wallSpriteMap = {
  wall_corner_topleft: cornerSpriteTopLeft,
  wall_corner_topright: cornerSpriteTopRight,
  wall_corner_bottomleft: cornerSpriteBottomLeft,
  wall_corner_bottomright: cornerSpriteBottomRight,
  wall_vertical: wallSpriteLeft,
  wall_left_vertical: wallSpriteLeft,
  wall_right_vertical: wallSpriteRight,
  wall_horizontal: wallSpriteUp,
  wall_horizontal_topcap: wallSpriteDown,
  wall_horizontal_bottomcap: wallSpriteUp,
  wall_full: enclosedWallSprite4, //placeholder
  wall_isolated_down: wallSpriteLeft,
  wall_isolated_up: wallSpriteLeft,
  wall_isolated_right: wallSpriteUp,
  wall_isolated_left: wallSpriteUp
  // ...etc...
};
function updateKeyState(key, value) {
  setKeyState(prev => ({ ...prev, [key]: value }));
}
function randInt(min, max) {
  return Math.floor(Math.random() * (max - min)) + min;
}
const walkCooldownRef = React.useRef(null);
function triggerWalkCooldown() {
  // Clear any existing cooldown
  if (walkCooldownRef.current) clearTimeout(walkCooldownRef.current);
  setIsWalking(true);
  walkCooldownRef.current = setTimeout(() => {
    setIsWalking(false);
    walkCooldownRef.current = null;
  }, 1500); // 1500ms for 5 frames at 300ms/frame
}
let logCounter = 0;
function addLogMessage(msg) {
  const id = Date.now().toString() + Math.random().toString(36).substr(2, 9);
  setActionLog(logs => [...logs, { msg, id }]);
  setTimeout(() => {
    setActionLog(logs => logs.filter(entry => entry.id !== id));
  }, 10000);
}
function makeRoom(x, y, w, h) {
  return { x, y, w, h, center: { x: Math.floor(x + w / 2), y: Math.floor(y + h / 2) } };
}
function roomsOverlap(a, b) {
  return (
    a.x < b.x + b.w &&
    a.x + a.w > b.x &&
    a.y < b.y + b.h &&
    a.y + a.h > b.y
  );
}
function carveRoom(dungeon, room) {
  for (let y = room.y; y < room.y + room.h; y++) {
    for (let x = room.x; x < room.x + room.w; x++) {
      dungeon[y][x] = 'F'; // Mark as floor (will be replaced with random floor tile later)
    }
  }
}
function carveCorridor(dungeon, from, to) {
  let x = from.x, y = from.y;
  while (x !== to.x) {
    dungeon[y][x] = 'F';
    x += x < to.x ? 1 : -1;
  }
  while (y !== to.y) {
    dungeon[y][x] = 'F';
    y += y < to.y ? 1 : -1;
  }
}
function generateCurrencyTiles(dungeon, minAmount, maxAmount, currencyCount = 5) {
  let cLocations = [];
  let height = dungeon.length;
  let width = dungeon[0].length;

  // Collect all floor tile positions
  let floorPositions = [];
  for (let y = 0; y < height; y++) {
    for (let x = 0; x < width; x++) {
      if (dungeon[y][x] !== 'W' && dungeon[y][x] !== 'S') {
        floorPositions.push({ x, y });
      }
    }
  }

  // Shuffle and pick currencyCount locations
  for (let i = 0; i < currencyCount && floorPositions.length > 0; i++) {
    let idx = randInt(0, floorPositions.length);
    let loc = floorPositions.splice(idx, 1)[0];
    cLocations.push({
      ...loc,
      amount: randInt(minAmount, maxAmount + 1)
    });
  }

  return cLocations;
}
function generateItemTiles(dungeon, minCount = 5, maxCount = 10, itemCount = randInt(minCount, maxCount)) {
  let iLocations = []
  let height = dungeon.length;
  let width = dungeon[0].length;
  
  let floorPositions = [];
  for (let y = 0; y < height; y++) {
    for (let x = 0; x < width; x++) {
      if (dungeon[y][x] !== 'W' && dungeon[y][x] !== 'S') {
        floorPositions.push({ x, y });
      }
    }
  }
  const itemNames = Object.keys(ITEM_DEFS);

  for (let i = 0; i < itemCount && floorPositions.length > 0; i++) {
    let idx = randInt(0, floorPositions.length);
    let loc = floorPositions.splice(idx, 1)[0];
    let itemName = itemNames[randInt(0, itemNames.length)];
    iLocations.push({
      ...loc,
      itemName,
      sprite: ITEM_DEFS[itemName].sprite
    });
  }
  return iLocations;
}
function addItemToInventory(itemName) {
  const itemDef = ITEM_DEFS[itemName];

  setInventory(prev => {
    let newInventory = [...prev];

    // Find stacks of this item that are not full
    let stackIndexes = [];
    newInventory.forEach((stack, idx) => {
      if (stack.name === itemName && stack.count < itemDef.stackSize) stackIndexes.push(idx);
    });

    // Try to add to an existing stack
    if (stackIndexes.length) {
      // There is at least one stack with space
      const updated = [...newInventory];
      updated[stackIndexes[0]].count += 1;
      return updated;
    }

    // If no stack with space, create a new stack if there is room
    if (newInventory.length < MAX_INVENTORY_SLOTS) {
      if (newInventory.length === MAX_INVENTORY_SLOTS - 1) {
        setInventoryFull(true);
      }
      return [...newInventory, { ...itemDef, count: 1 }];
    } else if (newInventory.length === MAX_INVENTORY_SLOTS && inventoryFull) {
      return prev;
    }
  });
}
function increaseLevel(){
  setLevel(prev => prev + 1);
  setMaxPlayerHP(prev => prev + 10);
  setPlayerHP(prev => Math.min(prev + 10, maxPlayerHP));
  setPlayerAttack(prev => prev + 2);
  setPlayerSpecialAttack(prev => prev + 3);
  setPlayerDefense(prev => prev + 2);
  setPlayerSpecialDefense(prev => prev + 3);
  setPlayerSpeed(prev => prev + 1);
  
  // Increase maxExp based on level
  const newMaxExp = Math.floor(100 * Math.pow(1.2, level - 1));
  setMaxExp(newMaxExp);
}
if (exp >= maxExp) {
  const overflow = exp - maxExp;
  setExp(overflow);
  increaseLevel();
  console.log(`Level: ${level} reached!`);
}
function generateProceduralDungeon(width, height, options = {}) {
  const {
    roomAttempts = 60,
    minRoomSize = 4,
    maxRoomSize = 10,
    maxRooms = 8
  } = options;
  const dungeon = Array.from({ length: height }, () => Array(width).fill('W'));
  const rooms = [];
//*

for (let i = 0; i < roomAttempts && rooms.length < maxRooms; i++) {
    const w = randInt(minRoomSize, maxRoomSize + 1);
    const h = randInt(minRoomSize, maxRoomSize + 1);
    const x = randInt(1, width - w - 1);
    const y = randInt(1, height - h - 1);
    const newRoom = makeRoom(x, y, w, h);
if (rooms.every(room => !roomsOverlap(newRoom, room))) {
      carveRoom(dungeon, newRoom);
      rooms.push(newRoom);
    }
  }
for (let i = 1; i < rooms.length; i++) {
    carveCorridor(dungeon, rooms[i - 1].center, rooms[i].center);
  }

for (let y = 0; y < height; y++) {
    for (let x = 0; x < width; x++) {
      if (dungeon[y][x] === 'F') dungeon[y][x] = getRandomFloorTile();
    }
  }
const lastRoom = rooms[rooms.length - 1];
  if (lastRoom) dungeon[lastRoom.center.y][lastRoom.center.x] = 'S';
const firstRoom = rooms[0] || { center: { x: Math.floor(width/2), y: Math.floor(height/2) } };
return {
    dungeon,
    playerStart: { x: firstRoom.center.x, y: firstRoom.center.y }
  };
}
React.useEffect(() => {
  generateDungeon();
}, [floor]);

React.useEffect(() => {
  lastDirectionRef.current = lastDirection;
  isPausedRef.current = isPaused;
  isWalkingRef.current = isWalking;
}, [lastDirection, isPaused, isWalking]);

React.useEffect(() => {
  setIdleSpriteIndex(0);
  setWalkSpriteIndex(0);
}, [lastDirection, isWalking]);
//*

React.useEffect(() => {
const handleKeyDown = (e) => {
if (e.key === 'Shift') {
updateKeyState('shift', true); // Set Shift pressed state to true
setShowIndicators(prev => !prev); // show indicators
}

let newX = playerPos.x;
let newY = playerPos.y;

switch (e.key) {
  //up
case 'w':
if (!keyState.w) {
updateKeyState('w', true);
if (isAiming){
setLastDirection('up');
}
}
if (!isAiming && !inDiagonalMode && !keyState.wHeld){ newY -= 1; // Move up unless Shift is pressed
setIsWalking(true);
triggerWalkCooldown();
updateKeyState('wHeld', true);
setLastDirection('up');
const pickedCurrency = currencyTiles.find(tile => tile.x === newX && tile.y === newY);
if (pickedCurrency) {
  setCurrency(curr => curr + pickedCurrency.amount);
  setCurrencyTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${pickedCurrency.amount} Pokedollars!`);
}
const itemHere = itemTiles.find(tile => tile.x === newX && tile.y === newY);
if (itemHere) {
  if (!inventoryFull){
  addItemToInventory(itemHere.itemName || "Reviver Seed");
  setItemTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${itemHere.itemName || "Reviver Seed"}!`);
  }
  else if (inventoryFull){
    addLogMessage('Inventory full!');
}
}
}
break;
case 'q':
//up left
if (!keyState.q) {
updateKeyState('q', true);
}
if (keyState.q && isAiming){
  setLastDirection('up-left');
}
if (!isAiming && keyState.q && !keyState.qHeld){
console.log('Moving up-left');
updateKeyState('qHeld', true);
newY -=1;
newX -=1;
setIsWalking(true);
triggerWalkCooldown();
setLastDirection('up-left');
const pickedCurrency = currencyTiles.find(tile => tile.x === newX && tile.y === newY);
if (pickedCurrency) {
  setCurrency(curr => curr + pickedCurrency.amount);
  setCurrencyTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${pickedCurrency.amount} Pokedollars!`);
}
const itemHere = itemTiles.find(tile => tile.x === newX && tile.y === newY);
if (itemHere) {
  if (!inventoryFull){
  addItemToInventory(itemHere.itemName || "Reviver Seed");
  setItemTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${itemHere.itemName || "Reviver Seed"}!`);
  }
  else if (inventoryFull){
    addLogMessage('Inventory full!');
}
}
}
break;
//down
case 's':
updateKeyState('s', true);
if (isAiming){
setLastDirection('down');
}
else if (isAiming && keyState.s && keyState.d){
setLastDirection('down-right');
}
else if (!isAiming && !inDiagonalMode && !keyState.sHeld){ 
newY += 1; // Move down unless Shift is pressed
setIsWalking(true);
triggerWalkCooldown();
updateKeyState('sHeld', true);
setLastDirection('down');
const pickedCurrency = currencyTiles.find(tile => tile.x === newX && tile.y === newY);
if (pickedCurrency) {
  setCurrency(curr => curr + pickedCurrency.amount);
  setCurrencyTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${pickedCurrency.amount} Pokedollars!`);
}
const itemHere = itemTiles.find(tile => tile.x === newX && tile.y === newY);
if (itemHere) {
  if (!inventoryFull){
  addItemToInventory(itemHere.itemName || "Reviver Seed");
  setItemTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${itemHere.itemName || "Reviver Seed"}!`);
  }
  else if (inventoryFull){
    addLogMessage('Inventory full!');
}
}
}
break;
case 'c':
//down right
if (!keyState.c) {
  updateKeyState('c', true);
}
if (keyState.c && isAiming){
  setLastDirection('down-right');
}
if (!isAiming && keyState.c && !keyState.cHeld){
updateKeyState('cHeld', true);
newY +=1;
newX +=1;
setIsWalking(true);
triggerWalkCooldown();
setLastDirection('down-right');
const pickedCurrency = currencyTiles.find(tile => tile.x === newX && tile.y === newY);
if (pickedCurrency) {
  setCurrency(curr => curr + pickedCurrency.amount);
  setCurrencyTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${pickedCurrency.amount} Pokedollars!`);
}
const itemHere = itemTiles.find(tile => tile.x === newX && tile.y === newY);
if (itemHere) {
  if (!inventoryFull){
  addItemToInventory(itemHere.itemName || "Reviver Seed");
  setItemTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${itemHere.itemName || "Reviver Seed"}!`);
  }
  else if (inventoryFull){
    addLogMessage('Inventory full!');
}
}
}
break;
//left
case 'a':
updateKeyState('a', true);
if (isAiming){
setLastDirection('left');
}
else if (isAiming && keyState.a && keyState.s){
setLastDirection('down-left');
}
else if (!isAiming && !inDiagonalMode && !keyState.aHeld){ newX -= 1; // Move left unless Shift is pressed
setIsWalking(true);
triggerWalkCooldown();
updateKeyState('aHeld', true);
setLastDirection('left');
const pickedCurrency = currencyTiles.find(tile => tile.x === newX && tile.y === newY);
if (pickedCurrency) {
  setCurrency(curr => curr + pickedCurrency.amount);
  setCurrencyTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${pickedCurrency.amount} Pokedollars!`);
}
const itemHere = itemTiles.find(tile => tile.x === newX && tile.y === newY);
if (itemHere) {
  if (!inventoryFull){
  addItemToInventory(itemHere.itemName || "Reviver Seed");
  setItemTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${itemHere.itemName || "Reviver Seed"}!`);
  }
  else if (inventoryFull){
    addLogMessage('Inventory full!');
}
}
}
break;
case 'z':
if (!keyState.z) {
  updateKeyState('z', true);
}
if (keyState.z && isAiming){
setLastDirection('down-left');
}
//down left
if (!isAiming && keyState.z && !keyState.zHeld){
updateKeyState('zHeld', true);
newY +=1;
newX -=1;
setIsWalking(true);
triggerWalkCooldown();
setLastDirection('down-left');
const pickedCurrency = currencyTiles.find(tile => tile.x === newX && tile.y === newY);
if (pickedCurrency) {
  setCurrency(curr => curr + pickedCurrency.amount);
  setCurrencyTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${pickedCurrency.amount} Pokedollars!`);
}
const itemHere = itemTiles.find(tile => tile.x === newX && tile.y === newY);
if (itemHere) {
  if (!inventoryFull){
  addItemToInventory(itemHere.itemName || "Reviver Seed");
  setItemTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${itemHere.itemName || "Reviver Seed"}!`);
  }
  else if (inventoryFull){
    addLogMessage('Inventory full!');
}
}
}
break;
//right
case 'd':
updateKeyState('d', true);
if (isAiming){
setLastDirection('right');
}
else if (isAiming && keyState.d && keyState.w){
setLastDirection('up-right');
}
else if (!isAiming && !inDiagonalMode && !keyState.dHeld){ newX += 1; // Move right unless Shift is pressed
setIsWalking(true);
triggerWalkCooldown();
updateKeyState('dHeld', true);
setLastDirection('right');
const pickedCurrency = currencyTiles.find(tile => tile.x === newX && tile.y === newY);
if (pickedCurrency) {
  setCurrency(curr => curr + pickedCurrency.amount);
  setCurrencyTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${pickedCurrency.amount} Pokedollars!`);
}
const itemHere = itemTiles.find(tile => tile.x === newX && tile.y === newY);
if (itemHere) {
  if (!inventoryFull){
  addItemToInventory(itemHere.itemName || "Reviver Seed");
  setItemTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${itemHere.itemName || "Reviver Seed"}!`);
  }
  else if (inventoryFull){
    addLogMessage('Inventory full!');
}
}
}
break;
case 'e':
if (!keyState.e) {
  updateKeyState('e', true);
}
if (isAiming && keyState.e){
  setLastDirection('up-right');
}
//up right
if (!isAiming && keyState.e && !keyState.eHeld){
updateKeyState('eHeld', true);
newY -=1;
newX +=1;
setIsWalking(true);
triggerWalkCooldown();
setLastDirection('up-right');
const pickedCurrency = currencyTiles.find(tile => tile.x === newX && tile.y === newY);
if (pickedCurrency) {
  setCurrency(curr => curr + pickedCurrency.amount);
  setCurrencyTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${pickedCurrency.amount} Pokedollars!`);
}
const itemHere = itemTiles.find(tile => tile.x === newX && tile.y === newY);
if (itemHere) {
  if (!inventoryFull){
  addItemToInventory(itemHere.itemName || "Reviver Seed");
  setItemTiles(tiles => tiles.filter(tile => !(tile.x === newX && tile.y === newY)));
  addLogMessage(`Picked up ${itemHere.itemName || "Reviver Seed"}!`);
  }
  else if (inventoryFull){
    addLogMessage('Inventory full!');
}
}
}
break;
case 'p': // debug for exp
if (exp < maxExp) {
  setExp(prev => prev + 200); // Add 200 EXP for testing
  addLogMessage(`Gained 200 EXP! Current EXP: ${exp + 200}`);
}
break;
case 'x': // x to toggle diagonal mode
if (isAiming){
setIsAiming(false);
}
setInDiagonalMode(prev => !prev);
break;
case 'Escape': // Escape key to toggle pause
setIsPaused(prev => !prev);
break;
case 'Shift': // Shift key to toggle aim mode
if (inDiagonalMode){
setInDiagonalMode(false);
}
setIsAiming(prev => !prev);
return;
default:
return;
}

// Check for collision with walls only if not paused and not holding Shift
if (!isAiming && !isPaused && newY >= 0 && newY < 30 && newX >= 0 && newX < 30 && dungeon[newY][newX] !== 'W' && !keyState.shift) {
setPlayerPos({ x: newX, y: newY });
updateCamera(newX, newY);
}

if (newX === stairs.x && newY === stairs.y) {
alert('You found the stairs! Onward!');
setFloor((prevFloor) => prevFloor + 1);
}
};

const handleKeyUp = (e) => {
if (e.key === 'q'){
updateKeyState('qHeld', false);
}
if (e.key === 'e'){
updateKeyState('eHeld', false);
}
if (e.key === 'z'){
updateKeyState('zHeld', false);
}
if (e.key === 'c'){
updateKeyState('cHeld', false);
}
if (e.key === 'Shift') {
updateKeyState('shift', false); // Set Shift pressed state to false
}
if (e.key === 'w') {
updateKeyState('w', false);
updateKeyState('wHeld', false);
//triggerWalkCooldown()
}
if (e.key === 'a') {
updateKeyState('a', false);
updateKeyState('aHeld', false);
//triggerWalkCooldown();
}
if (e.key === 's') {
updateKeyState('s', false);
updateKeyState('sHeld', false);
//triggerWalkCooldown();
}
if (e.key === 'd') {
updateKeyState('d', false);
updateKeyState('dHeld', false);
//triggerWalkCooldown();
}
};

window.addEventListener('keydown', handleKeyDown);
window.addEventListener('keyup', handleKeyUp);
return () => {
window.removeEventListener('keydown', handleKeyDown);
window.removeEventListener('keyup', handleKeyUp);
};
}, [playerPos, stairs, dungeon, isPaused, keyState.shift]); // Add isShiftPressed to dependencies


const idleIntervalMs = 500; // Adjust as needed for idle animation speed
const walkIntervalMs = 300; // Adjust as needed for walking animation speed

React.useEffect(() => {
  if (isWalking || isPaused) return;
  const interval = setInterval(() => {
    switch (lastDirectionRef.current) {
      case 'left':
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonLeftSprites.length);
        break;
      case 'right':
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonRightSprites.length);
        break;
      case 'up':
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonUpSprites.length);
        break;
      case 'down':
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonSprites.length);
        break;
      case 'up-left':
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonUpLeftSprites.length);
        break;
      case 'up-right':
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonUpRightSprites.length);
        break;
      case 'down-left':
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonDownLeftSprites.length);
        break;
      case 'down-right':
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonDownRightSprites.length);
        break;
      default:
        setIdleSpriteIndex((prev) => (prev + 1) % vaporeonSprites.length);
    }
  }, idleIntervalMs);
  return () => clearInterval(interval);
}, [isWalking, isPaused, lastDirection]);

// Walking animation effect
React.useEffect(() => {
  if (!isWalking || isPaused) return;
  const interval = setInterval(() => {
    switch (lastDirectionRef.current) {
      case 'down':
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonDownWalkSprites.length);
        break;
      case 'up':
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonUpWalkSprites.length);
        break;
      case 'right':
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonRightWalkSprites.length);
        break;
      case 'left':
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonLeftWalkSprites.length);
        break;
      case 'up-left':
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonUpLeftWalkSprites.length);
        break;
      case 'up-right':
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonUpRightWalkSprites.length);
        break;
      case 'down-left':
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonDownLeftWalkSprites.length);
        break;
      case 'down-right':
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonDownRightWalkSprites.length);
        break;
      default:
        setWalkSpriteIndex((prev) => (prev + 1) % vaporeonSprites.length);
    }
  }, walkIntervalMs);
  return () => clearInterval(interval);
}, [isWalking, isPaused, lastDirection]);

const generateDungeon = () => {
  const width = 30, height = 30;
  const { dungeon: newDungeon, playerStart } = generateProceduralDungeon(width, height);

  // Find stairs position
  let stairX = 0, stairY = 0;
  for (let y = 0; y < height; y++) {
    for (let x = 0; x < width; x++) {
      if (newDungeon[y][x] === 'S') {
        stairX = x;
        stairY = y;
      }
    }
  }
const currencyLocs = generateCurrencyTiles(newDungeon, 20, 80, 5); // 5 coins, value 20-80
  setCurrencyTiles(currencyLocs);
const itemLocs = generateItemTiles(newDungeon, 5, 10, randInt(5, 10)); // between 5 and 10 items spawn
  setItemTiles(itemLocs);

  setStairs({ x: stairX, y: stairY });
  setPlayerPos(playerStart);
  setDungeon(newDungeon);
  updateCamera(playerStart.x, playerStart.y);
};

const getRandomFloorTile = () => {
return floorSprites[Math.floor(Math.random() * floorSprites.length)];
};

const updateCamera = (x, y) => {
const offsetX = (15 - x + 1) * 40 + 20;
const offsetY = (15 - y - 8.5) * 40 + 20;
setCameraTransform(`translate(${offsetX}px, ${offsetY}px) scale(${zoomLevel})`);
};

const getLineCoordinates = (direction) => {
const lineCoords = [];
let x = playerPos.x;
let y = playerPos.y;

for (let i = 0; i < 30; i++) { // Extend infinitely until hitting a wall
if (direction === 'up' && y - i >= 0) {
if (dungeon[y - i][x] === 'W') break; // Stop if it hits a wall
lineCoords.push({ x: x, y: y - i });
} else if (direction === 'down' && y + i < 30) {
if (dungeon[y + i][x] === 'W') break; // Stop if it hits a wall
lineCoords.push({ x: x, y: y + i });
} else if (direction === 'left' && x - i >= 0) {
if (dungeon[y][x - i] === 'W') break; // Stop if it hits a wall
lineCoords.push({ x: x - i, y: y });
} else if (direction === 'right' && x + i < 30) {
if (dungeon[y][x + i] === 'W') break; // Stop if it hits a wall
lineCoords.push({ x: x + i, y: y });
}
}
return lineCoords;
};

const lineCoordinates = showIndicators ? getLineCoordinates(lastDirection) : [];

return (
  <div>
    <div className="game-area p-4">
      <div className="counter">Floor: {floor}</div>
      <div className="counter" style={{ right: '150px' }}>
        <img src={Pokedollar} alt="Currency" style={{ width: 24, verticalAlign: 'middle' }} /> {currency}
      </div>
      <div className="dungeon-container">
        <div className="dungeon" style={{ transform: cameraTransform }}>
          {dungeon.map((row, rowIndex) => (
            <div key={rowIndex} className="dungeon-row flex">
              {row.map((cell, colIndex) => {
                let wallSprite;
                const currencyHere = currencyTiles.find(tile => tile.x === colIndex && tile.y === rowIndex);
                const itemHere = itemTiles.find(tile => tile.x === colIndex && tile.y === rowIndex);
                // Determine sprite based on position
                if (cell === 'W') {
                  wallSprite = wallSpriteMap[getWallTileType(colIndex, rowIndex, dungeon)];
                }

                const isIndicatorVisible = lineCoordinates.some(coord => coord.x === colIndex && coord.y === rowIndex) && !(playerPos.x === colIndex && playerPos.y === rowIndex);

                return (
                  <div key={colIndex} className={`dungeon-cell relative w-10 h-10 ${isIndicatorVisible && showIndicators ? 'red-border' : ''}`}>
                    {cell === 'W' ? (
                      <img src={wallSprite} alt="Wall" className="wall absolute" />
                    ) : (
                      <img src={cell} alt="Floor" className="floor absolute" />
                    )}
                    {cell === 'S' && (
                      <img src={stairSprite} alt="Stairs" className="stair absolute" />
                    )}
                    {currencyHere && (
                      <img src={Pokedollar} alt="Currency" className="absolute w-full h-full" style={{
                        zIndex: 5,
                        objectFit: 'contain',
                        width: '50%',
                        height: '50%',
                        left: '25%',
                        top: '25%',
                      }} />
                    )}
                    {itemHere && (
                      <img src={ITEM_DEFS[itemHere.itemName].sprite} alt={itemHere.itemName} className="absolute w-full h-full" style={{
                        zIndex: 5,
                        objectFit: 'contain',
                        width: '50%',
                        height: '50%',
                        left: '25%',
                        top: '25%',
                      }} />
                    )}

                    {playerPos.x === colIndex && playerPos.y === rowIndex && (
                      <img
                        src={
                          isWalking
                            ? (lastDirection === 'left' ? vaporeonLeftWalkSprites[walkSpriteIndex]
                              : lastDirection === 'right' ? vaporeonRightWalkSprites[walkSpriteIndex]
                              : lastDirection === 'up' ? vaporeonUpWalkSprites[walkSpriteIndex]
                              : lastDirection === 'down' ? vaporeonDownWalkSprites[walkSpriteIndex]
                              : lastDirection === 'up-left' ? vaporeonUpLeftWalkSprites[walkSpriteIndex]
                              : lastDirection === 'up-right' ? vaporeonUpRightWalkSprites[walkSpriteIndex]
                              : lastDirection === 'down-left' ? vaporeonDownLeftWalkSprites[walkSpriteIndex]
                              : lastDirection === 'down-right' ? vaporeonDownRightWalkSprites[walkSpriteIndex]
                              : vaporeonSprites[idleSpriteIndex])
                            : (lastDirection === 'left' ? vaporeonLeftSprites[idleSpriteIndex]
                              : lastDirection === 'right' ? vaporeonRightSprites[idleSpriteIndex]
                              : lastDirection === 'up' ? vaporeonUpSprites[idleSpriteIndex]
                              : lastDirection === 'down' ? vaporeonSprites[idleSpriteIndex]
                              : lastDirection === 'down-left' ? vaporeonDownLeftSprites[idleSpriteIndex]
                              : lastDirection === 'down-right' ? vaporeonDownRightSprites[idleSpriteIndex]
                              : lastDirection === 'up-left' ? vaporeonUpLeftSprites[idleSpriteIndex]
                              : lastDirection === 'up-right' ? vaporeonUpRightSprites[idleSpriteIndex]
                              : vaporeonSprites[idleSpriteIndex]) // Default sprite when not walking
                        }
                        alt="Vaporeon"
                        className="player-sprite absolute"
                      />
                    )}
                  </div>
                )
              })}
            </div>
          ))}
        </div>
        <div
              style={{
                position: 'absolute',
                left: '50%',
                bottom: '30px',
                transform: 'translateX(-50%)',
                width: '60%',
                maxHeight: '120px',
                background: 'rgba(30,30,30,0.5)',
                color: 'white',
                padding: '10px',
                borderRadius: '8px',
                overflowY: 'auto',
                fontSize: '16px',
                zIndex: 30,
                pointerEvents: 'none',
              }}
            >
              {actionLog.map(entry => (
    <div key={entry.id}>{entry.msg}</div>
  ))}
        </div>
      </div>
        <div className="absolute top-0 left-0 w-full h-full flex items-left justify-left"
           style={{
            position: 'absolute',
            transform: 'translateY(100%)',
            width: '100%',
            height: '50px',
            marginTop: '40px',
            opacity: '0.8',

          }}>
        <img src={
           0 <= exp/maxExp && exp/maxExp < 0.01 ? expBarComponent0
          : exp/maxExp === 1 ? expBarComponent100
          : 0.01 <= exp/maxExp && exp/maxExp < 0.02 ? expBarComponent1
          : 0.02 <= exp/maxExp && exp/maxExp < 0.03 ? expBarComponent2
          : 0.03 <= exp/maxExp && exp/maxExp < 0.04 ? expBarComponent3
          : 0.04 <= exp/maxExp && exp/maxExp < 0.05 ? expBarComponent4
          : 0.05 <= exp/maxExp && exp/maxExp < 0.06 ? expBarComponent5
          : 0.06 <= exp/maxExp && exp/maxExp < 0.07 ? expBarComponent6
          : 0.07 <= exp/maxExp && exp/maxExp < 0.08 ? expBarComponent7
          : 0.08 <= exp/maxExp && exp/maxExp < 0.09 ? expBarComponent8
          : 0.09 <= exp/maxExp && exp/maxExp < 0.1 ? expBarComponent9
          : 0.1 <= exp/maxExp && exp/maxExp < 0.11 ? expBarComponent10
          : 0.11 <= exp/maxExp && exp/maxExp < 0.12 ? expBarComponent11
          : 0.12 <= exp/maxExp && exp/maxExp < 0.13 ? expBarComponent12
          : 0.13 <= exp/maxExp && exp/maxExp < 0.14 ? expBarComponent13
          : 0.14 <= exp/maxExp && exp/maxExp < 0.15 ? expBarComponent14
          : 0.15 <= exp/maxExp && exp/maxExp < 0.16 ? expBarComponent15
          : 0.16 <= exp/maxExp && exp/maxExp < 0.17 ? expBarComponent16
          : 0.17 <= exp/maxExp && exp/maxExp < 0.18 ? expBarComponent17
          : 0.18 <= exp/maxExp && exp/maxExp < 0.19 ? expBarComponent18
          : 0.19 <= exp/maxExp && exp/maxExp < 0.2 ? expBarComponent19
          : 0.2 <= exp/maxExp && exp/maxExp < 0.21 ? expBarComponent20
          : 0.21 <= exp/maxExp && exp/maxExp < 0.22 ? expBarComponent21
          : 0.22 <= exp/maxExp && exp/maxExp < 0.23 ? expBarComponent22
          : 0.23 <= exp/maxExp && exp/maxExp < 0.24 ? expBarComponent23
          : 0.24 <= exp/maxExp && exp/maxExp < 0.25 ? expBarComponent24
          : 0.25 <= exp/maxExp && exp/maxExp < 0.26 ? expBarComponent25
          : 0.26 <= exp/maxExp && exp/maxExp < 0.27 ? expBarComponent26
          : 0.27 <= exp/maxExp && exp/maxExp < 0.28 ? expBarComponent27
          : 0.28 <= exp/maxExp && exp/maxExp < 0.29 ? expBarComponent28
          : 0.29 <= exp/maxExp && exp/maxExp < 0.3 ? expBarComponent29
          : 0.3 <= exp/maxExp && exp/maxExp < 0.31 ? expBarComponent30
          : 0.31 <= exp/maxExp && exp/maxExp < 0.32 ? expBarComponent31
          : 0.32 <= exp/maxExp && exp/maxExp < 0.33 ? expBarComponent32
          : 0.33 <= exp/maxExp && exp/maxExp < 0.34 ? expBarComponent33
          : 0.34 <= exp/maxExp && exp/maxExp < 0.35 ? expBarComponent34
          : 0.35 <= exp/maxExp && exp/maxExp < 0.36 ? expBarComponent35
          : 0.36 <= exp/maxExp && exp/maxExp < 0.37 ? expBarComponent36
          : 0.37 <= exp/maxExp && exp/maxExp < 0.38 ? expBarComponent37
          : 0.38 <= exp/maxExp && exp/maxExp < 0.39 ? expBarComponent38
          : 0.39 <= exp/maxExp && exp/maxExp < 0.4 ? expBarComponent39
          : 0.4 <= exp/maxExp && exp/maxExp < 0.41 ? expBarComponent40
          : 0.41 <= exp/maxExp && exp/maxExp < 0.42 ? expBarComponent41
          : 0.42 <= exp/maxExp && exp/maxExp < 0.43 ? expBarComponent42
          : 0.43 <= exp/maxExp && exp/maxExp < 0.44 ? expBarComponent43
          : 0.44 <= exp/maxExp && exp/maxExp < 0.45 ? expBarComponent44
          : 0.45 <= exp/maxExp && exp/maxExp < 0.46 ? expBarComponent45
          : 0.46 <= exp/maxExp && exp/maxExp < 0.47 ? expBarComponent46
          : 0.47 <= exp/maxExp && exp/maxExp < 0.48 ? expBarComponent47
          : 0.48 <= exp/maxExp && exp/maxExp < 0.49 ? expBarComponent48
          : 0.49 <= exp/maxExp && exp/maxExp < 0.5 ? expBarComponent49
          : 0.5 <= exp/maxExp && exp/maxExp < 0.51 ? expBarComponent50
          : 0.51 <= exp/maxExp && exp/maxExp < 0.52 ? expBarComponent51
          : 0.52 <= exp/maxExp && exp/maxExp < 0.53 ? expBarComponent52
          : 0.53 <= exp/maxExp && exp/maxExp < 0.54 ? expBarComponent53
          : 0.54 <= exp/maxExp && exp/maxExp < 0.55 ? expBarComponent54
          : 0.55 <= exp/maxExp && exp/maxExp < 0.56 ? expBarComponent55
          : 0.56 <= exp/maxExp && exp/maxExp < 0.57 ? expBarComponent56
          : 0.57 <= exp/maxExp && exp/maxExp < 0.58 ? expBarComponent57
          : 0.58 <= exp/maxExp && exp/maxExp < 0.59 ? expBarComponent58
          : 0.59 <= exp/maxExp && exp/maxExp < 0.6 ? expBarComponent59
          : 0.6 <= exp/maxExp && exp/maxExp < 0.61 ? expBarComponent60
          : 0.61 <= exp/maxExp && exp/maxExp < 0.62 ? expBarComponent61
          : 0.62 <= exp/maxExp && exp/maxExp < 0.63 ? expBarComponent62
          : 0.63 <= exp/maxExp && exp/maxExp < 0.64 ? expBarComponent63
          : 0.64 <= exp/maxExp && exp/maxExp < 0.65 ? expBarComponent64
          : 0.65 <= exp/maxExp && exp/maxExp < 0.66 ? expBarComponent65
          : 0.66 <= exp/maxExp && exp/maxExp < 0.67 ? expBarComponent66
          : 0.67 <= exp/maxExp && exp/maxExp < 0.68 ? expBarComponent67
          : 0.68 <= exp/maxExp && exp/maxExp < 0.69 ? expBarComponent68
          : 0.69 <= exp/maxExp && exp/maxExp < 0.7 ? expBarComponent69
          : 0.7 <= exp/maxExp && exp/maxExp < 0.71 ? expBarComponent70
          : 0.71 <= exp/maxExp && exp/maxExp < 0.72 ? expBarComponent71
          : 0.72 <= exp/maxExp && exp/maxExp < 0.73 ? expBarComponent72
          : 0.73 <= exp/maxExp && exp/maxExp < 0.74 ? expBarComponent73
          : 0.74 <= exp/maxExp && exp/maxExp < 0.75 ? expBarComponent74
          : 0.75 <= exp/maxExp && exp/maxExp < 0.76 ? expBarComponent75
          : 0.76 <= exp/maxExp && exp/maxExp < 0.77 ? expBarComponent76
          : 0.77 <= exp/maxExp && exp/maxExp < 0.78 ? expBarComponent77
          : 0.78 <= exp/maxExp && exp/maxExp < 0.79 ? expBarComponent78
          : 0.79 <= exp/maxExp && exp/maxExp < 0.8 ? expBarComponent79
          : 0.8 <= exp/maxExp && exp/maxExp < 0.81 ? expBarComponent80
          : 0.81 <= exp/maxExp && exp/maxExp < 0.82 ? expBarComponent81
          : 0.82 <= exp/maxExp && exp/maxExp < 0.83 ? expBarComponent82
          : 0.83 <= exp/maxExp && exp/maxExp < 0.84 ? expBarComponent83
          : 0.84 <= exp/maxExp && exp/maxExp < 0.85 ? expBarComponent84
          : 0.85 <= exp/maxExp && exp/maxExp < 0.86 ? expBarComponent85
          : 0.86 <= exp/maxExp && exp/maxExp < 0.87 ? expBarComponent86
          : 0.87 <= exp/maxExp && exp/maxExp < 0.88 ? expBarComponent87
          : 0.88 <= exp/maxExp && exp/maxExp < 0.89 ? expBarComponent88
          : 0.89 <= exp/maxExp && exp/maxExp < 0.9 ? expBarComponent89
          : 0.9 <= exp/maxExp && exp/maxExp < 0.91 ? expBarComponent90
          : 0.91 <= exp/maxExp && exp/maxExp < 0.92 ? expBarComponent91
          : 0.92 <= exp/maxExp && exp/maxExp < 0.93 ? expBarComponent92
          : 0.93 <= exp/maxExp && exp/maxExp < 0.94 ? expBarComponent93
          : 0.94 <= exp/maxExp && exp/maxExp < 0.95 ? expBarComponent94
          : 0.95 <= exp/maxExp && exp/maxExp < 0.96 ? expBarComponent95
          : 0.96 <= exp/maxExp && exp/maxExp < 0.97 ? expBarComponent96
          : 0.97 <= exp/maxExp && exp/maxExp < 0.98 ? expBarComponent97
          : 0.98 <= exp/maxExp && exp/maxExp < 0.99 ? expBarComponent98
          : 0.99 <= exp/maxExp && exp/maxExp < 1 ? expBarComponent99
          : null
         } alt="Experience Bar" className="absolute" />
        </div>
        <div className="absolute top-0 left-0 w-full h-full flex items-left justify-left"
        style={{
          position: 'absolute',
          transform: 'scale(1.4)',
          top: '20%',
          left: '20%',
          right: '80%',
          bottom: '80%',
          marginLeft: '0px',
          marginTop: '0px',
          bottom: '100%',
          display: 'flex',
          alignItems: 'flex-start',
        }}>
          <img src={vaporeonPortraitNormal} alt="Vaporeon Portrait" className="w-16 h-16" />
      </div>
      </div>
    {isPaused && !showOptions && !showMoves && !showToolbox && !showStatus && (
      <div className="menu">
        <h2 className="text-white text-lg">Paused</h2>
        <div className="flex">
          <button className="bg-blue-500 text-white p-2 rounded mr-2" onClick={() => setShowStatus(true)}>Status</button>
          <button className="bg-blue-500 text-white p-2 rounded" onClick={() => setShowMoves(true)}>Moves</button>
          <button className="bg-blue-500 text-white p-2 rounded" onClick={() => setShowToolbox(true)}>Toolbox</button>
          <button className="bg-blue-500 text-white p-2 rounded" onClick={() => setShowOptions(true)}>Options</button>
          <button className="bg-red-500 text-white p-2 rounded" onClick={() => setIsPaused(false)}>Close</button>
        </div>
      </div>
    )}
    {isPaused && showStatus && ( // Show status menu when Status is clicked
      <div className="menu status-menu">
        <h2 className="text-white text-lg">Status</h2>
        <p className="text-white">Level: {level}</p>
        <p className="text-white">HP: {playerHP}/{maxPlayerHP}</p>
        <p className="text-white">EXP: {exp}/{maxExp}</p>
        <p className="text-white">Attack: {playerAttack}</p>
        <p className="text-white">Special Attack: {playerSpecialAttack}</p>
        <p className="text-white">Speed: {playerSpeed}</p>
        <p className="text-white">Special Defense: {playerSpecialDefense}</p>
        <p className="text-white">Defense: {playerDefense}</p>
        <button className="bg-blue-500 text-white p-2 rounded" onClick={() => setShowStatus(false)}>Back</button>
      </div>
    )}
    {isPaused && showOptions && ( // Show options menu when options are clicked
      <div className="menu options-menu">
        <h2 className="text-white text-lg">Options</h2>
        <label>
          <input type="checkbox" checked={checkBox1} onChange={() => setCheckBox1(!checkBox1)} /> Checkbox 1
        </label>
        <label>
          <input type="checkbox" checked={checkBox2} onChange={() => setCheckBox2(!checkBox2)} /> Checkbox 2
        </label>
        <label>
          <input type="checkbox" checked={checkBox3} onChange={() => setCheckBox3(!checkBox3)} /> Checkbox 3
        </label>
        <button className="bg-blue-500 text-white p-2 rounded" onClick={() => setShowOptions(false)}>Back</button>
      </div>
    )}
    {isPaused && showMoves && ( // Show moves menu when Moves is clicked
      <div className="menu moves-menu">
        <h2 className="text-white text-lg">Moves</h2>
        <p className="text-white">Water Pulse - 10/10 PP</p>
        <p className="text-white">Aqua Tail - 15/15 PP</p>
        <p className="text-white">Acid Armor - 30/30 PP</p>
        <p className="text-white">Refresh - 10/10 PP</p>
        <button className="bg-blue-500 text-white p-2 rounded" onClick={() => setShowMoves(false)}>Back</button>
      </div>
    )}
    {isPaused && showToolbox && (
      <div className="menu">
        <h2 className="text-white text-lg">Toolbox</h2>
        {inventory.length === 0 ? (
          <p className="text-white">No items in inventory.</p>
        ) : (
          <ul>
            {inventory.map((item, idx) => (
              <li key={idx} className="text-white flex items-center mb-2">
                <img src={item.sprite} alt={item.name} style={{ width: 32, marginRight: 8 }} />
                {item.name} x{item.count}
              </li>
            ))}
          </ul>
        )}
        <button className="bg-blue-500 text-white p-2 rounded" onClick={() => setShowToolbox(false)}>Back</button>
      </div>
    )}
  </div>
);
}
const MemoizedGame = React.memo(Game);

// Render the memoized component
ReactDOM.render(
  <MemoizedGame />, // Use the memoized component as a JSX element
  document.getElementById('root')
  );
</script>
</body>
</html>